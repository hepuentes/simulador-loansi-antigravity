## PROYECTO: LOANSI – Sistema de Simulación de Créditos y Scoring Multilínea

## ESTADO DEL SISTEMA
PRODUCCIÓN REAL
Usuarios activos
Sistema financiero sensible

## ENTORNO OBLIGATORIO
- Hosting: PythonAnywhere Free (Beginner)
- Python: 3.10
- Framework: Flask 3.x (Factory pattern)
- Base de datos: SQLite (archivo único)
- Frontend: Bootstrap 5.3.2 por CDN
- CSRF: SIEMPRE activo (Flask-WTF)

## PRINCIPIO CRÍTICO
Estabilidad, claridad y capacidad de depuración
SON MÁS IMPORTANTES que elegancia o complejidad.

## LIMITACIONES DEL ENTORNO (NUNCA IGNORAR)

1. Recursos limitados
- NO procesos pesados al iniciar la app
- NO tareas en background
- NO loops infinitos
- NO cargas masivas en memoria

2. Arranque de la aplicación
- create_app() debe ser liviano
- NO lógica compleja en imports
- NO llamadas externas al iniciar

3. Base de datos
- SQLite con archivo único
- Consultas simples
- NO locks prolongados
- NO joins complejos innecesarios

4. Logs y debugging
- Usar SOLO prints controlados
- NO imprimir datos sensibles
- Mensajes claros y específicos

Formato obligatorio de print:
[archivo.py][función][paso X] descripción breve

Ejemplo correcto:
print("[scoring_service.py][calcular_score][paso 3] validando ingresos")

Ejemplo incorrecto:
print("error")
print(user_data)

## PRINCIPIO HOLÍSTICO
Una modificación puede afectar:
- rutas
- servicios
- modelos
- permisos
- scoring
- comité
- templates

SIEMPRE analizar el sistema completo antes de cambiar algo.

## ESTRUCTURA BASE DEL PROYECTO
(La estructura puede evolucionar según necesidades)

/
├── app/
│   ├── __init__.py              # create_app()
│   ├── config.py
│   ├── extensions.py            # CSRF, login, etc
│   ├── routes/
│   │   ├── auth.py
│   │   ├── main.py
│   │   ├── admin_routes.py
│   │   ├── scoring_routes.py
│   │   ├── comite_routes.py
│   │   ├── api_routes.py
│   │   └── asesor_routes.py
│   ├── services/
│   ├── models/
│   └── utils/
├── templates/
├── static/
├── run.py
└── loansi.db

## SEGURIDAD
- NO escribir credenciales ni tokens
- NO exponer lógica de scoring al cliente
- Toda ruta debe validar rol
- CSRF obligatorio en formularios

## GIT Y DEPLOY

- Los agentes trabajan SIEMPRE en el repo clonado local
- NO hacer push automático sin aprobación del usuario
- NO crear ramas innecesarias
- Cambios deben quedar listos para commit único

Flujo oficial:
1. Cambios locales
2. Auditoría
3. Validación de seguridad
4. Testing funcional
5. Aprobación del usuario
6. Commit + push a GitHub
7. Pull manual desde PythonAnywhere
8. Reload manual de la webapp

## MODO DE TRABAJO DE LOS AGENTES
- Autónomos
- Especializados
- No interactúan con el usuario
- Solo el usuario APRUEBA o RECHAZA
- Pedir confirmación antes de acciones destructivas
